%h1 Shopping list

- if @grouped_items.empty?
  .alert.alert-secondary
    Start by creating #{link_to('groups', groups_path)} to organise #{link_to('items', regular_items_path)}.
- else
  .btn-group.mb-3
    = link_to 'Clear all', shopping_list_path, method: :delete, class: 'btn btn-danger',
              data: { confirm: 'Reset quantities and remove temporary items?' }
    = link_to 'Clear confirmed', shopping_list_path(confirmed: true), method: :delete, class: 'btn btn-warning',
              data: { confirm: 'Reset quantities and remove temporary items of confirmed items?' }

  - @grouped_items.each do |group|
    %h3.mt-3
      .dropdown.group-menu-container>
        %a.dropdown-toggle.group-menu{ href: '#', data: { toggle: 'dropdown' } } Actions
        .dropdown-menu
          = link_to 'Clear all', shopping_list_path(group_id: group.id), method: :delete, class: 'dropdown-item',
                    data: { confirm: 'Reset all quantities and remove temporary items in this group?' }
          = link_to 'Clear confirmed', shopping_list_path(group_id: group.id, confirmed: true), method: :delete, class: 'dropdown-item',
                    data: { confirm: 'Reset all quantities and remove temporary items of confirmed items in this group?' }
      = group.name

    %ul.list-group.shopping-list{ id: "shopping-list-group-#{group.id}" }
      - group.items.each do |item|
        = render 'item', item: item

    %button.btn.btn-primary.btn-sm.mt-2{ type: 'button', data: { toggle: 'modal', target: '#add-item', new_item_path: new_item_path(group_id: group.id) } }
      Add item

  .modal#add-item{ tabindex: '-1', role: 'dialog' }
    .modal-dialog.modal-dialog-centered{ role: 'document' }
      .modal-content
        .modal-header
          %h5.modal-title Add item
          %button.close{ type: 'button', 'data-dismiss': 'modal' }
            %span &times;
        .modal-body
          .text-center#add-item-loading
            .spinner-border{ role: 'status' }
          #add-item-content
