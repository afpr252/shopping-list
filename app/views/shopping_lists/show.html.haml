%h1 Shopping list

- if @grouped_items.empty?
  .alert.alert-secondary
    Start by creating #{link_to('groups', groups_path)} to organise #{link_to('items', regular_items_path)}.
- else
  %p= link_to 'Clear shopping list', shopping_list_path, method: :delete, class: 'btn btn-danger', data: { confirm: 'Reset all quantities and remove temporary items?' }

  - @grouped_items.each do |group|
    %h3.mt-3= group.name

    - if group.items.any?
      %p= link_to 'Clear', shopping_list_path(group_id: group.id), method: :delete, class: 'btn btn-danger btn-sm', data: { confirm: 'Reset all quantities and remove temporary items on group?' }

    %ul.list-group.shopping-list{ id: "shopping-list-group-#{group.id}" }
      - group.items.each do |item|
        = render 'item', item: item

    %button.btn.btn-primary.btn-sm.mt-2{ type: 'button', data: { toggle: 'modal', target: '#add-temporary-item', new_item_path: new_item_path(group_id: group.id) } }
      Add temporary item

  .modal#add-temporary-item{ tabindex: '-1', role: 'dialog' }
    .modal-dialog.modal-dialog-centered{ role: 'document' }
      .modal-content
        .modal-header
          %h5.modal-title Add temporary item
          %button.close{ type: 'button', 'data-dismiss': 'modal' }
            %span &times;
        .modal-body
          .text-center#add-temporary-item-loading
            .spinner-border{ role: 'status' }
          #add-temporary-item-content
